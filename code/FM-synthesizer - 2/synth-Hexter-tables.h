
/*
	Syntherklaas FM -- Tables jacked from Hexter by Sean Bolton.

	I'm using these tables as an attempt to get a little closer to that Yamaha FM sound.
	Source: https://github.com/smbolton/hexter/blob/master/src/dx7_voice_tables.c
*/

#pragma once

namespace SFM
{
	/*
		Table taken from Hexter: converts LFO speed to frequency.
		It is based on one Jamie Bullock's measurements.
	*/

	float g_dx7_voice_lfo_frequency[128] = 
	{
		0.062506f,  0.124815f,  0.311474f,  0.435381f,  0.619784f,
		0.744396f,  0.930495f,  1.116390f,  1.284220f,  1.496880f,
		1.567830f,  1.738994f,  1.910158f,  2.081322f,  2.252486f,
		2.423650f,  2.580668f,  2.737686f,  2.894704f,  3.051722f,
		3.208740f,  3.366820f,  3.524900f,  3.682980f,  3.841060f,
		3.999140f,  4.159420f,  4.319700f,  4.479980f,  4.640260f,
		4.800540f,  4.953584f,  5.106628f,  5.259672f,  5.412716f,
		5.565760f,  5.724918f,  5.884076f,  6.043234f,  6.202392f,
		6.361550f,  6.520044f,  6.678538f,  6.837032f,  6.995526f,
		7.154020f,  7.300500f,  7.446980f,  7.593460f,  7.739940f,
		7.886420f,  8.020588f,  8.154756f,  8.288924f,  8.423092f,
		8.557260f,  8.712624f,  8.867988f,  9.023352f,  9.178716f,
		9.334080f,  9.669644f, 10.005208f, 10.340772f, 10.676336f,
		11.011900f, 11.963680f, 12.915460f, 13.867240f, 14.819020f,
		15.770800f, 16.640240f, 17.509680f, 18.379120f, 19.248560f,
		20.118000f, 21.040700f, 21.963400f, 22.886100f, 23.808800f,
		24.731500f, 25.759740f, 26.787980f, 27.816220f, 28.844460f,
		29.872700f, 31.228200f, 32.583700f, 33.939200f, 35.294700f,
		36.650200f, 37.812480f, 38.974760f, 40.137040f, 41.299320f,
		42.461600f, 43.639800f, 44.818000f, 45.996200f, 47.174400f,
		47.174400f, 47.174400f, 47.174400f, 47.174400f, 47.174400f,
		47.174400f, 47.174400f, 47.174400f, 47.174400f, 47.174400f,
		47.174400f, 47.174400f, 47.174400f, 47.174400f, 47.174400f,
		47.174400f, 47.174400f, 47.174400f, 47.174400f, 47.174400f,
		47.174400f, 47.174400f, 47.174400f, 47.174400f, 47.174400f,
		47.174400f, 47.174400f, 47.174400f
	};

	/* This table converts an output level of 0 to 99 into a phase
	* modulation index of 0 to ~2.089 periods.  It actually extends
	* below 0 and beyond 99, since amplitude modulation can produce
	* 'negative' output levels, and velocities above 100 can produce
	* output levels above 99, plus it includes a 257th 'guard' point.
	* Table index 128 corresponds to output level 0, and index 227 to OL 99.
	* I believe this is based on information from the Chowning/Bristow
	* book (see the CREDITS file), filtered down to me through the work of
	* Pinkston, Harrington, and Abdullah as I found it on the Internet.  The
	* code used to calculate it looks something like this:
	*
	*    // DX7 output level to TL translation table
	*    int tl_table[128] = {
	*        127, 122, 118, 114, 110, 107, 104, 102, 100, 98, 96, 94, 92, 90,
	*        88, 86, 85, 84, 82, 81, 79, 78, 77, 76, 75, 74, 73, 72, 71,
	*        70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55,
	*        54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39,
	*        38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 25, 24, 23,
	*        22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6,
	*        5, 4, 3, 2, 1, 0, -1, -2, -3, -4, -5, -6, -7, -8, -9, -10, -11,
	*        -12, -13, -14, -15, -16, -17, -18, -19, -20, -21, -22, -23, -24,
	*        -25, -26, -27, -28
	*    };
	*
	*    int ol;
	*    double mi;
	*
	*    for (ol = 0; ol < 128; ol++) {
	*        if (ol < 5) {    // smoothly ramp from 0.0 at 0 to the proper value at 5
	*            mi = pow(2.0, ( (33.0/16.0) - ((double)tl_table[5]/8.0) - 1.0));
	*            mi = mi * ((double)ol / 5.0);
	*        } else {
	*            mi = pow(2.0, ( (33.0/16.0) - ((double)tl_table[ol]/8.0) - 1.0));
	*        }
	*    #ifndef HEXTER_USE_FLOATING_POINT
	*        printf(" %6d,", DOUBLE_TO_FP(mi));
	*    #else
	*        printf(" %g,", mi);
	*    #endif
	*    }
	*/
	float g_dx7_voice_eg_ol_to_mod_index_table[257] = 
	{
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f,
		0.0f, 3.93186e-05f, 7.86372e-05f, 0.000117956f,
		0.000157274f, 0.000196593f, 0.00025495f, 0.000303188f,
		0.000360553f, 0.000428773f, 0.000509899f, 0.000606376f,
		0.000721107f, 0.000857545f, 0.0010198f, 0.00121275f,
		0.00132252f, 0.00144221f, 0.00171509f, 0.00187032f,
		0.0022242f, 0.0024255f, 0.00264503f, 0.00288443f,
		0.00314549f, 0.00343018f, 0.00374064f, 0.00407919f,
		0.00444839f, 0.00485101f, 0.00529006f, 0.00576885f,
		0.00629098f, 0.00686036f, 0.00748128f, 0.00815839f,
		0.00889679f, 0.00970201f, 0.0105801f, 0.0115377f,
		0.012582f, 0.0137207f, 0.0149626f, 0.0163168f,
		0.0177936f, 0.019404f, 0.0211602f, 0.0230754f,
		0.0251639f, 0.0274414f, 0.0299251f, 0.0326336f,
		0.0355871f, 0.0388081f, 0.0423205f, 0.0461508f,
		0.0503278f, 0.0548829f, 0.0598502f, 0.0652671f,
		0.0711743f, 0.0776161f, 0.084641f, 0.0923016f,
		0.100656f, 0.109766f, 0.1197f, 0.130534f,
		0.142349f, 0.155232f, 0.169282f, 0.184603f,
		0.201311f, 0.219532f, 0.239401f, 0.261068f,
		0.284697f, 0.310464f, 0.338564f, 0.369207f,
		0.402623f, 0.439063f, 0.478802f, 0.522137f,
		0.569394f, 0.620929f, 0.677128f, 0.738413f,
		0.805245f, 0.878126f, 0.957603f, 1.04427f,
		1.13879f, 1.24186f, 1.35426f, 1.47683f,
		1.61049f, 1.75625f, 1.91521f, 2.08855f,
		2.27758f, 2.48372f, 2.70851f, 2.95365f,
		3.22098f, 3.5125f, 3.83041f, 4.1771f,
		4.55515f, 4.96743f, 5.41702f, 5.9073f,
		6.44196f, 7.02501f, 7.66083f, 8.35419f,
		9.11031f, 9.93486f, 10.834f, 11.8146f,
		12.8839f, 14.05f, 15.3217f, 16.7084f,
		18.2206f, 19.8697f, 21.6681f, 23.6292f,
		23.6292f
	};
}
